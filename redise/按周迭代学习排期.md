# Redis 按周迭代学习排期（实战版，16 周）

说明：每周明确目标、实战任务、验收标准与产出物；默认 Redis 6/7，环境为 Windows + Docker Desktop（可选 WSL2）。

## 第 1 周：安装与基础操作
- 目标：安装 Redis，熟悉基本命令与客户端
- 实战任务：本地/容器启动；`SET/GET/HMSET/LPUSH/SADD/ZADD` 操作与脚本
- 验收：`redis-benchmark` 可运行并生成初步报告
- 产出物：启动脚本、基础命令手册

## 第 2 周：数据结构与键空间设计
- 目标：掌握核心结构与键命名规范
- 实战任务：为用户/订单/会话设计键空间（前缀/层级/TTL）
- 验收：覆盖主用结构；键空间规范文档齐备
- 产出物：设计说明与示例代码

## 第 3 周：缓存模式与治理
- 目标：Cache-Aside/Write-Through/Write-Behind
- 实战任务：实现多级缓存（本地+Redis）；穿透（空值缓存/Bloom）、击穿（热点预热/随机 TTL）、雪崩（限流+抖动）
- 验收：命中率 `>95%`；雪崩演练通过
- 产出物：`modules/cache` 原型与压测报告

## 第 4 周：并发与分布式锁
- 目标：Lua 原子脚本、锁续约与栅栏令牌
- 实战任务：实现可续约锁与单飞（SingleFlight）；任务幂等
- 验收：并发 1 万下任务重复率 `<0.1%`；锁丢失检测与告警
- 产出物：`modules/lock` 原型与演练记录

## 第 5 周：Pub/Sub 与 Streams 入门
- 目标：对比场景与约束；选择合适模式
- 实战任务：实现 Pub/Sub 原型与 Streams 消费组（ack/pending）
- 验收：断电恢复后消息回补成功；Lag 面板可视
- 产出物：消息原型与观测面板

## 第 6 周：持久化与恢复
- 目标：RDB/AOF 混合持久化与重写策略
- 实战任务：配置 AOF 每秒 `fsync`；RDB 周期快照；故障恢复演练
- 验收：数据丢失窗口 `<=1s`；恢复 `<2min`
- 产出物：持久化配置与演练剧本

## 第 7 周：内存与淘汰策略
- 目标：`maxmemory` 与逐出策略；大 Key/热 Key 治理
- 实战任务：构造热 Key 与大 Key；优化编码（hash/listpack）
- 验收：命中率稳定；淘汰不影响核心路径
- 产出物：治理方案与监控看板

## 第 8 周：性能与阻塞操作
- 目标：Pipeline/事务；排查阻塞与慢查询
- 实战任务：构建 Pipeline；分析 `SLOWLOG`/`LATENCY DOCTOR`；替换阻塞命令
- 验收：P99 `<50ms`；慢查询清零（核心路径）
- 产出物：性能报告与替换清单

## 第 9 周：高可用（Sentinel）
- 目标：主从复制与 Sentinel 切换
- 实战任务：搭建主从 + Sentinel；切换演练与常见坑
- 验收：切换 `<10s`；客户端重连与重试有效
- 产出物：HA 部署脚本与剧本

## 第 10 周：扩展与 Cluster
- 目标：Cluster 槽位与迁移；代理层对比
- 实战任务：搭建最小 Cluster；分片与再平衡演练
- 验收：迁移期间无感（节流）；热点分片治理
- 产出物：Cluster 部署与演练记录

## 第 11 周：Lua 与原子操作
- 目标：封装常用原子脚本、错误与回滚策略
- 实战任务：库存扣减/限流/去重等 Lua 脚本
- 验收：脚本幂等；回滚与重试策略完善
- 产出物：脚本库与测试报告

## 第 12 周：安全与合规
- 目标：ACL/TLS/Auth，审计与密钥治理
- 实战任务：最小权限配置；TLS 与证书管理；审计日志落地
- 验收：基线检查通过；敏感操作可追溯
- 产出物：安全清单与自动化脚本

## 第 13 周：备份与灾备
- 目标：RDB/AOF 组合备份、异地容灾方案
- 实战任务：定时备份/加密/校验；异地恢复演练
- 验收：RTO `<15min`；演练记录完整
- 产出物：备份脚本与灾备手册

## 第 14 周：监控与告警
- 目标：Redis Exporter + Grafana
- 实战任务：命中率/延迟/内存/连接/慢查询/阻塞指标接入
- 验收：关键阈值告警有效；去重与抑制策略生效
- 产出物：面板 JSON 与告警规则

## 第 15 周：综合项目收敛
- 目标：整合缓存/锁/流；端到端治理
- 实战任务：形成生产就绪 Demo（含降级/回补/告警）
- 验收：全链路 SLO 达标；演示无故障通过
- 产出物：最终 Demo 与复盘报告

## 第 16 周：迁移与对比评估
- 目标：与 Kafka/RabbitMQ/DB 缓存方案的取舍
- 实战任务：成本与稳定性评估；迁移与并存策略
- 验收：选型陈述与决策建议完整
- 产出物：评估与迁移指南

## 每周交付模板（建议）
- 代码：`redis-expert/<module>` 每周新增或完善
- 文档：`docs/week-XX.md`（目标/任务/产出/指标/复盘）
- 看板：`monitoring/grafana-boards/` 面板与告警导出
- 压测：`benchmarks/week-XX/` 脚本与报告