# Go 按周迭代学习排期（实战版，16 周）

说明：每周给出目标、实战任务、验收标准与产出物；以 Windows + Go `>=1.22` 为基础，使用 Gin/gRPC/sqlx(or GORM)/zap/viper/testify/prometheus/otel。

## 第 1 周：环境与骨架
- 目标：安装 Go、初始化 `go-expert` 仓
- 实战任务：`go mod init`，`cmd/api`/`cmd/worker`/`cmd/cli` 骨架，`internal` 分层结构
- 验收：`go build`、`go test` 通过；PowerShell 构建脚本可用
- 产出物：仓库骨架、README 与脚手架脚本

## 第 2 周：语言核心与泛型
- 目标：掌握切片/映射/接口与泛型
- 实战任务：实现泛型集合与 `Map/Reduce`、错误处理约定
- 验收：功能正确；基准对比（无泛型 vs 泛型）
- 产出物：`pkg/collections`、基准报告

## 第 3 周：并发基础与 Worker Pool
- 目标：goroutine/channel/select 与 WaitGroup/Mutex
- 实战任务：实现可取消 Worker Pool；任务排队与回压
- 验收：`-race` 无竞争；在 10 万任务下稳定
- 产出物：`pkg/workerpool`、并发基准与 pprof 报告

## 第 4 周：配置/日志/错误治理
- 目标：viper 配置、zap 结构化日志、错误包装与分类
- 实战任务：请求链路日志（traceId）、全局配置管理、统一错误响应
- 验收：配置热加载可用；错误分类清晰
- 产出物：`pkg/config`、`pkg/logger`、约定文档

## 第 5 周：HTTP REST 服务（Gin）
- 目标：完成 CRUD 与中间件栈
- 实战任务：`/users` `/orders` 资源；认证/限流/恢复/超时中间件
- 验收：k6 压测 RPS `>2000`、P99 `<120ms`
- 产出物：`cmd/api` 服务、压测脚本与报告

## 第 6 周：数据库与事务
- 目标：sqlx/GORM、迁移管理、事务边界
- 实战任务：编写迁移、实现仓储接口与事务包装、连接池调优
- 验收：一致性场景（并发下单）正确；慢查询识别
- 产出物：`internal/repo`、迁移脚本、集成测试

## 第 7 周：gRPC 与流式通信
- 目标：proto 规范、unary/streaming、拦截器链
- 实战任务：实现 `/OrderService`；客户端重试与超时
- 验收：双向流正确；超时/重试生效
- 产出物：`cmd/grpc`、proto 文件与生成脚本

## 第 8 周：测试工程化与 CI
- 目标：单元/集成/端到端测试，GitHub Actions（或本地 CI）
- 实战任务：`testify/httptest/gomock`；编写 CI 流程（lint/test/build）
- 验收：覆盖率 `>70%`（API `>80%`）；流水线稳定
- 产出物：测试用例、CI 配置与质量报告

## 第 9 周：性能与剖析
- 目标：`testing.B` 基准、`pprof`/`trace` 分析与优化
- 实战任务：定位热点（CPU/alloc）；优化内存与 GC
- 验收：P99 延迟下降 `>20%`；资源占用降低
- 产出物：基准与优化报告、pprof 火焰图

## 第 10 周：可观测性（Metrics/Trace/Logs）
- 目标：Prometheus 指标、OpenTelemetry Trace、日志关联
- 实战任务：指标（请求耗时/错误率/队列深度）、Trace 贯通 HTTP 与 gRPC
- 验收：Grafana 面板与告警阈值有效；Jaeger 可视化链路完整
- 产出物：面板 JSON、告警规则、观测手册

## 第 11 周：高级并发与回压
- 目标：fan-in/fan-out/pipeline、令牌桶限流、背压
- 实战任务：重构 Worker 池；在突发流量下稳定
- 验收：零丢失/零过载；延迟在阈值内
- 产出物：并发工具库与示例

## 第 12 周：弹性与容错
- 目标：超时/重试/熔断/隔离/降级
- 实战任务：实现策略与配置化；失败注入与演练
- 验收：在故障场景下服务可恢复；SLO 达标
- 产出物：容错中间件与演练记录

## 第 13 周：安全与认证
- 目标：TLS/mTLS、JWT 与 OAuth2（go-oidc）
- 实战任务：端到端 TLS；保护敏感接口；权限模型
- 验收：证书与密钥管理到位；安全审计可追溯
- 产出物：安全基线文档与自动化脚本

## 第 14 周：分布式任务处理器
- 目标：任务模型、幂等/重试/回压、NATS/Kafka 可选集成
- 实战任务：实现 `cmd/worker` 服务；任务监控与治理
- 验收：10 万任务稳定处理；重试成功率 `>99%`
- 产出物：Worker 服务与看板

## 第 15 周：交付与部署
- 目标：交叉编译、Docker 多阶段、最小镜像与健康探针
- 实战任务：为 `api/grpc/worker` 打包镜像；Compose 本地编排
- 验收：镜像 `<60MB`、启动 `<300ms`、健康探针与重启策略有效
- 产出物：Dockerfile/Compose 与部署手册

## 第 16 周：总项目集成与复盘
- 目标：整合 CLI/REST/gRPC/Worker，形成生产就绪 Demo
- 实战任务：端到端观测与告警；容量与成本评估；技术陈述与取舍报告
- 验收：SLO 达标；演示无故障通过
- 产出物：最终 Demo、复盘与迁移建议

## 每周交付模板（建议）
- 代码：`go-expert/<module>` 每周新增或完善
- 文档：`docs/week-XX.md`（目标/任务/产出/指标/复盘）
- 看板：`monitoring/grafana-boards/` 面板与告警导出
- 压测：`benchmarks/week-XX/` 脚本与报告